<color=#75715e>/*-</color>
<color=#75715e> * Copyright (C) 2002, 2017, Oracle and/or its affiliates. All rights reserved.</color>
<color=#75715e> *</color>
<color=#75715e> * This file was distributed by Oracle as part of a version of Oracle Berkeley</color>
<color=#75715e> * DB Java Edition made available at:</color>
<color=#75715e> *</color>
<color=#75715e> * http://www.oracle.com/technetwork/database/database-technologies/berkeleydb/downloads/index.html</color>
<color=#75715e> *</color>
<color=#75715e> * Please see the LICENSE file included in the top-level directory of the</color>
<color=#75715e> * appropriate version of Oracle Berkeley DB Java Edition for a copy of the</color>
<color=#75715e> * license and additional information.</color>
<color=#75715e> */</color>

<color=#f92672>package</color> <color=#f8f8f2>com.sleepycat.collections</color><color=#f8f8f2>;</color>

<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.compat.DbCompat</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.compat.DbCompat.OpReadOptions</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.compat.DbCompat.OpResult</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.je.*</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.util.keyrange.KeyRange</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.util.keyrange.RangeCursor</color><color=#f8f8f2>;</color>

<color=#75715e>/**</color>
<color=#75715e> * Represents a Berkeley DB cursor and adds support for indices, bindings and key ranges.</color>
<color=#75715e> *</color>
<color=#75715e> * <p>This class operates on a view and takes care of reading and updating indices, calling</color>
<color=#75715e> * bindings, constraining access to a key range, etc.</color>
<color=#75715e> *</color>
<color=#75715e> * @author Mark Hayes</color>
<color=#75715e> */</color>
<color=#66d9ef>final</color> <color=#66d9ef>class</color> <color=#a6e22e>DataCursor</color> <color=#66d9ef>implements</color> <color=#f8f8f2>Cloneable</color> <color=#f8f8f2>{</color>

  <color=#75715e>/** Repositioned exactly to the key/data pair given. */</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#66d9ef>int</color> <color=#f8f8f2>REPOS_EXACT</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color>
  <color=#75715e>/** Repositioned on a record following the key/data pair given. */</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#66d9ef>int</color> <color=#f8f8f2>REPOS_NEXT</color> <color=#f92672>=</color> <color=#ae81ff>1</color><color=#f8f8f2>;</color>
  <color=#75715e>/** Repositioned failed, no records on or after the key/data pair given. */</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#66d9ef>int</color> <color=#f8f8f2>REPOS_EOF</color> <color=#f92672>=</color> <color=#ae81ff>2</color><color=#f8f8f2>;</color>

  <color=#66d9ef>private</color> <color=#f8f8f2>RangeCursor</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>JoinCursor</color> <color=#f8f8f2>joinCursor</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>KeyRange</color> <color=#f8f8f2>range</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>readUncommitted</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DatabaseEntry</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DatabaseEntry</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DatabaseEntry</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DatabaseEntry</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DataCursor</color><color=#f92672>[]</color> <color=#f8f8f2>indexCursorsToClose</color><color=#f8f8f2>;</color>

  <color=#75715e>/** Creates a cursor for a given view. */</color>
  <color=#f8f8f2>DataCursor</color><color=#f8f8f2>(</color><color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>init</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Creates a cursor for a given view. */</color>
  <color=#f8f8f2>DataCursor</color><color=#f8f8f2>(</color><color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color> <color=#f8f8f2>CursorConfig</color> <color=#f8f8f2>config</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>init</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color> <color=#f8f8f2>config</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Creates a cursor for a given view and single key range. Used by unit tests. */</color>
  <color=#f8f8f2>DataCursor</color><color=#f8f8f2>(</color><color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>singleKey</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>init</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>subRange</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>range</color><color=#f8f8f2>,</color> <color=#f8f8f2>singleKey</color><color=#f8f8f2>));</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Creates a cursor for a given view and key range. Used by unit tests. */</color>
  <color=#f8f8f2>DataCursor</color><color=#f8f8f2>(</color>
      <color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color>
      <color=#66d9ef>boolean</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color>
      <color=#f8f8f2>Object</color> <color=#f8f8f2>beginKey</color><color=#f8f8f2>,</color>
      <color=#66d9ef>boolean</color> <color=#f8f8f2>beginInclusive</color><color=#f8f8f2>,</color>
      <color=#f8f8f2>Object</color> <color=#f8f8f2>endKey</color><color=#f8f8f2>,</color>
      <color=#66d9ef>boolean</color> <color=#f8f8f2>endInclusive</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>init</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>view</color><color=#f8f8f2>,</color>
        <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color>
        <color=#66d9ef>null</color><color=#f8f8f2>,</color>
        <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>subRange</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>range</color><color=#f8f8f2>,</color> <color=#f8f8f2>beginKey</color><color=#f8f8f2>,</color> <color=#f8f8f2>beginInclusive</color><color=#f8f8f2>,</color> <color=#f8f8f2>endKey</color><color=#f8f8f2>,</color> <color=#f8f8f2>endInclusive</color><color=#f8f8f2>));</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Creates a join cursor. */</color>
  <color=#f8f8f2>DataCursor</color><color=#f8f8f2>(</color>
      <color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#f8f8f2>DataCursor</color><color=#f92672>[]</color> <color=#f8f8f2>indexCursors</color><color=#f8f8f2>,</color> <color=#f8f8f2>JoinConfig</color> <color=#f8f8f2>joinConfig</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>closeIndexCursors</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>(</color>
          <color=#e6db74>"The primary collection in a join must not be a secondary "</color> <color=#f92672>+</color> <color=#e6db74>"database"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
    <color=#f8f8f2>Cursor</color><color=#f92672>[]</color> <color=#f8f8f2>cursors</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>Cursor</color><color=#f92672>[</color><color=#f8f8f2>indexCursors</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f92672>]</color><color=#f8f8f2>;</color>
    <color=#66d9ef>for</color> <color=#f8f8f2>(</color><color=#66d9ef>int</color> <color=#f8f8f2>i</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672><</color> <color=#f8f8f2>cursors</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672>+=</color> <color=#ae81ff>1</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>cursors</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color> <color=#f92672>=</color> <color=#f8f8f2>indexCursors</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color><color=#f8f8f2>.</color><color=#a6e22e>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getCursor</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
    <color=#f8f8f2>joinCursor</color> <color=#f92672>=</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>db</color><color=#f8f8f2>.</color><color=#a6e22e>join</color><color=#f8f8f2>(</color><color=#f8f8f2>cursors</color><color=#f8f8f2>,</color> <color=#f8f8f2>joinConfig</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>init</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>closeIndexCursors</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>indexCursorsToClose</color> <color=#f92672>=</color> <color=#f8f8f2>indexCursors</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Clones a cursor preserving the current position. */</color>
  <color=#f8f8f2>DataCursor</color> <color=#a6e22e>cloneCursor</color><color=#f8f8f2>()</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>

    <color=#f8f8f2>DataCursor</color> <color=#f8f8f2>o</color><color=#f8f8f2>;</color>
    <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>o</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>DataCursor</color><color=#f8f8f2>)</color> <color=#66d9ef>super</color><color=#f8f8f2>.</color><color=#a6e22e>clone</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>CloneNotSupportedException</color> <color=#f8f8f2>neverHappens</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>

    <color=#f8f8f2>o</color><color=#f8f8f2>.</color><color=#a6e22e>initThangs</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>o</color><color=#f8f8f2>.</color><color=#a6e22e>keyThang</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>o</color><color=#f8f8f2>.</color><color=#a6e22e>valueThang</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>primaryKeyThang</color> <color=#f92672>!=</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>o</color><color=#f8f8f2>.</color><color=#a6e22e>primaryKeyThang</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#f8f8f2>o</color><color=#f8f8f2>.</color><color=#a6e22e>cursor</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>dup</color><color=#f8f8f2>(</color><color=#66d9ef>true</color><color=#f8f8f2>);</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>o</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the internal range cursor. */</color>
  <color=#f8f8f2>RangeCursor</color> <color=#a6e22e>getCursor</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Constructor helper. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>void</color> <color=#a6e22e>init</color><color=#f8f8f2>(</color><color=#f8f8f2>DataView</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>,</color> <color=#f8f8f2>CursorConfig</color> <color=#f8f8f2>config</color><color=#f8f8f2>,</color> <color=#f8f8f2>KeyRange</color> <color=#f8f8f2>range</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>config</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>config</color> <color=#f92672>=</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>cursorConfig</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>view</color> <color=#f92672>=</color> <color=#f8f8f2>view</color><color=#f8f8f2>;</color>
    <color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>writeAllowed</color> <color=#f92672>=</color> <color=#f8f8f2>writeAllowed</color> <color=#f92672>&&</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>writeAllowed</color><color=#f8f8f2>;</color>
    <color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>range</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>range</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f92672>?</color> <color=#f8f8f2>range</color> <color=#f8f8f2>:</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>range</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>readUncommitted</color> <color=#f92672>=</color> <color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getReadUncommitted</color><color=#f8f8f2>()</color> <color=#f92672>||</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>currentTxn</color><color=#f8f8f2>.</color><color=#a6e22e>isReadUncommitted</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>initThangs</color><color=#f8f8f2>();</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>joinCursor</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>cursor</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>MyRangeCursor</color><color=#f8f8f2>(</color><color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>range</color><color=#f8f8f2>,</color> <color=#f8f8f2>config</color><color=#f8f8f2>,</color> <color=#f8f8f2>view</color><color=#f8f8f2>,</color> <color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>writeAllowed</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Constructor helper. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>void</color> <color=#a6e22e>initThangs</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#f8f8f2>keyThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>primaryKeyThang</color> <color=#f92672>=</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>()</color> <color=#f92672>?</color> <color=#f8f8f2>(</color><color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>())</color> <color=#f8f8f2>:</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>valueThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Set entries from given byte arrays. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>void</color> <color=#a6e22e>setThangs</color><color=#f8f8f2>(</color><color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>keyBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>priKeyBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>valueBytes</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>setData</color><color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copyBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>keyBytes</color><color=#f8f8f2>));</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color> <color=#f92672>!=</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>.</color><color=#a6e22e>setData</color><color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copyBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>priKeyBytes</color><color=#f8f8f2>));</color>
    <color=#f8f8f2>}</color>

    <color=#f8f8f2>valueThang</color><color=#f8f8f2>.</color><color=#a6e22e>setData</color><color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copyBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>valueBytes</color><color=#f8f8f2>));</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Closes the associated cursor. */</color>
  <color=#66d9ef>void</color> <color=#a6e22e>close</color><color=#f8f8f2>()</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>joinCursor</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>JoinCursor</color> <color=#f8f8f2>toClose</color> <color=#f92672>=</color> <color=#f8f8f2>joinCursor</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>joinCursor</color> <color=#f92672>=</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>toClose</color><color=#f8f8f2>.</color><color=#a6e22e>close</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>cursor</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>Cursor</color> <color=#f8f8f2>toClose</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getCursor</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>cursor</color> <color=#f92672>=</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>currentTxn</color><color=#f8f8f2>.</color><color=#a6e22e>closeCursor</color><color=#f8f8f2>(</color><color=#f8f8f2>toClose</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>indexCursorsToClose</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>DataCursor</color><color=#f92672>[]</color> <color=#f8f8f2>toClose</color> <color=#f92672>=</color> <color=#f8f8f2>indexCursorsToClose</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>indexCursorsToClose</color> <color=#f92672>=</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
      <color=#66d9ef>for</color> <color=#f8f8f2>(</color><color=#66d9ef>int</color> <color=#f8f8f2>i</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672><</color> <color=#f8f8f2>toClose</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672>+=</color> <color=#ae81ff>1</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>toClose</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color><color=#f8f8f2>.</color><color=#a6e22e>close</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Repositions to a given raw key/data pair, or just past it if that record has been deleted.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @return REPOS_EXACT, REPOS_NEXT or REPOS_EOF.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>int</color> <color=#a6e22e>repositionRange</color><color=#f8f8f2>(</color>
      <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>lastKeyBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>lastPriKeyBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>lastValueBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>));</color>
    <color=#f8f8f2>OpResult</color> <color=#f8f8f2>result</color><color=#f8f8f2>;</color>

    <color=#75715e>/* Use the given key/data byte arrays. */</color>
    <color=#f8f8f2>setThangs</color><color=#f8f8f2>(</color><color=#f8f8f2>lastKeyBytes</color><color=#f8f8f2>,</color> <color=#f8f8f2>lastPriKeyBytes</color><color=#f8f8f2>,</color> <color=#f8f8f2>lastValueBytes</color><color=#f8f8f2>);</color>

    <color=#75715e>/* Position on or after the given key/data pair. */</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsAllowed</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#75715e>/*</color>
<color=#75715e>       * No-dups is the simple case. Search for key >= lastKey, and then</color>
<color=#75715e>       * compare to see if we found lastKey again.</color>
<color=#75715e>       */</color>
      <color=#f8f8f2>result</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchKeyRange</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>);</color>

      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>result</color><color=#f8f8f2>.</color><color=#a6e22e>isSuccess</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>REPOS_EOF</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>}</color>

      <color=#66d9ef>return</color> <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color>
              <color=#f8f8f2>lastKeyBytes</color><color=#f8f8f2>,</color>
              <color=#ae81ff>0</color><color=#f8f8f2>,</color>
              <color=#f8f8f2>lastKeyBytes</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>,</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>getData</color><color=#f8f8f2>(),</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>getOffset</color><color=#f8f8f2>(),</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>getSize</color><color=#f8f8f2>())</color>
          <color=#f92672>?</color> <color=#f8f8f2>REPOS_EXACT</color>
          <color=#f8f8f2>:</color> <color=#f8f8f2>REPOS_NEXT</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>

    <color=#75715e>/*</color>
<color=#75715e>     * Duplicates are more complex.</color>
<color=#75715e>     *</color>
<color=#75715e>     * Search for key == lastKey && data >= lastData, and then compare to</color>
<color=#75715e>     * see if we found lastData again.</color>
<color=#75715e>     */</color>
    <color=#f8f8f2>result</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchBothRange</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>);</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>result</color><color=#f8f8f2>.</color><color=#a6e22e>isSuccess</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>

      <color=#f8f8f2>DatabaseEntry</color> <color=#f8f8f2>thang</color> <color=#f92672>=</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>()</color> <color=#f92672>?</color> <color=#f8f8f2>primaryKeyThang</color> <color=#f8f8f2>:</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>;</color>

      <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>bytes</color> <color=#f92672>=</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>()</color> <color=#f92672>?</color> <color=#f8f8f2>lastPriKeyBytes</color> <color=#f8f8f2>:</color> <color=#f8f8f2>lastValueBytes</color><color=#f8f8f2>;</color>

      <color=#66d9ef>return</color> <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color>
              <color=#f8f8f2>bytes</color><color=#f8f8f2>,</color> <color=#ae81ff>0</color><color=#f8f8f2>,</color> <color=#f8f8f2>bytes</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>,</color> <color=#f8f8f2>thang</color><color=#f8f8f2>.</color><color=#a6e22e>getData</color><color=#f8f8f2>(),</color> <color=#f8f8f2>thang</color><color=#f8f8f2>.</color><color=#a6e22e>getOffset</color><color=#f8f8f2>(),</color> <color=#f8f8f2>thang</color><color=#f8f8f2>.</color><color=#a6e22e>getSize</color><color=#f8f8f2>())</color>
          <color=#f92672>?</color> <color=#f8f8f2>REPOS_EXACT</color>
          <color=#f8f8f2>:</color> <color=#f8f8f2>REPOS_NEXT</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>

    <color=#75715e>/*</color>
<color=#75715e>     * The record with lastKey/lastData must have been deleted and there</color>
<color=#75715e>     * are no records with key == lastkey && data > lastData.</color>
<color=#75715e>     *</color>
<color=#75715e>     * Search for key >= lastKey, but keep in mind that we will probably</color>
<color=#75715e>     * land on the first record with lastKey.</color>
<color=#75715e>     */</color>
    <color=#f8f8f2>result</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchKeyRange</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>);</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>result</color><color=#f8f8f2>.</color><color=#a6e22e>isSuccess</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>REPOS_EOF</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>

    <color=#75715e>/*</color>
<color=#75715e>     * If we are positioned on the first dup of lastKey, skip over its</color>
<color=#75715e>     * records to the first record with the next key.</color>
<color=#75715e>     */</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>lastKeyBytes</color><color=#f8f8f2>,</color>
        <color=#ae81ff>0</color><color=#f8f8f2>,</color>
        <color=#f8f8f2>lastKeyBytes</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>,</color>
        <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>getData</color><color=#f8f8f2>(),</color>
        <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>getOffset</color><color=#f8f8f2>(),</color>
        <color=#f8f8f2>keyThang</color><color=#f8f8f2>.</color><color=#a6e22e>getSize</color><color=#f8f8f2>()))</color> <color=#f8f8f2>{</color>

      <color=#f8f8f2>result</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNextNoDup</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>);</color>

      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>result</color><color=#f8f8f2>.</color><color=#a6e22e>isSuccess</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>REPOS_EOF</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>REPOS_NEXT</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Repositions to a given raw key/data pair.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @throws IllegalStateException when the database has unordered keys or unordered duplicates.</color>
<color=#75715e>   * @return whether the search succeeded.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>boolean</color> <color=#a6e22e>repositionExact</color><color=#f8f8f2>(</color>
      <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>keyBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>priKeyBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>byte</color><color=#f92672>[]</color> <color=#f8f8f2>valueBytes</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>));</color>
    <color=#f8f8f2>OpResult</color> <color=#f8f8f2>result</color><color=#f8f8f2>;</color>

    <color=#75715e>/* Use the given key/data byte arrays. */</color>
    <color=#f8f8f2>setThangs</color><color=#f8f8f2>(</color><color=#f8f8f2>keyBytes</color><color=#f8f8f2>,</color> <color=#f8f8f2>priKeyBytes</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueBytes</color><color=#f8f8f2>);</color>

    <color=#75715e>/* Position on the given key/data pair. */</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>recNumRenumber</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#75715e>/* getSearchBoth doesn't work with recno-renumber databases. */</color>
      <color=#f8f8f2>result</color> <color=#f92672>=</color>
          <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchKey</color><color=#f8f8f2>(</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color>
              <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>result</color> <color=#f92672>=</color>
          <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchBoth</color><color=#f8f8f2>(</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color>
              <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>result</color><color=#f8f8f2>.</color><color=#a6e22e>isSuccess</color><color=#f8f8f2>();</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the view for this cursor. */</color>
  <color=#f8f8f2>DataView</color> <color=#a6e22e>getView</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>view</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the range for this cursor. */</color>
  <color=#f8f8f2>KeyRange</color> <color=#a6e22e>getRange</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>range</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns whether write is allowed for this cursor, as specified to the constructor. */</color>
  <color=#66d9ef>boolean</color> <color=#a6e22e>isWriteAllowed</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>writeAllowed</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the key object for the last record read. */</color>
  <color=#f8f8f2>Object</color> <color=#a6e22e>getCurrentKey</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>makeKey</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the value object for the last record read. */</color>
  <color=#f8f8f2>Object</color> <color=#a6e22e>getCurrentValue</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>makeValue</color><color=#f8f8f2>(</color><color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the internal key entry. */</color>
  <color=#f8f8f2>DatabaseEntry</color> <color=#a6e22e>getKeyThang</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Returns the internal primary key entry, which is the same object as the key entry if the cursor</color>
<color=#75715e>   * is not for a secondary database.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>DatabaseEntry</color> <color=#a6e22e>getPrimaryKeyThang</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the internal value entry. */</color>
  <color=#f8f8f2>DatabaseEntry</color> <color=#a6e22e>getValueThang</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns whether record number access is allowed. */</color>
  <color=#66d9ef>boolean</color> <color=#a6e22e>hasRecNumAccess</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>recNumAccess</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the record number for the last record read. */</color>
  <color=#66d9ef>int</color> <color=#a6e22e>getCurrentRecordNumber</color><color=#f8f8f2>()</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>btreeRecNumDb</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#75715e>/* BTREE-RECNO access. */</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>otherThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
      <color=#f8f8f2>DbCompat</color><color=#f8f8f2>.</color><color=#a6e22e>getCurrentRecordNumber</color><color=#f8f8f2>(</color><color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getCursor</color><color=#f8f8f2>(),</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>));</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>DbCompat</color><color=#f8f8f2>.</color><color=#a6e22e>getRecordNumber</color><color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#75715e>/* QUEUE or RECNO database. */</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>DbCompat</color><color=#f8f8f2>.</color><color=#a6e22e>getRecordNumber</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getCurrent(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getCurrent</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
        <color=#f8f8f2>.</color><color=#a6e22e>getCurrent</color><color=#f8f8f2>(</color>
            <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)))</color>
        <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getFirst(), join cursor is allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getFirst</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>LockMode</color> <color=#f8f8f2>lockMode</color> <color=#f92672>=</color> <color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>joinCursor</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>joinCursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNext</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>lockMode</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
          <color=#f8f8f2>.</color><color=#a6e22e>getFirst</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>lockMode</color><color=#f8f8f2>))</color>
          <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getNext(), join cursor is allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getNext</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>LockMode</color> <color=#f8f8f2>lockMode</color> <color=#f92672>=</color> <color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>joinCursor</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>joinCursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNext</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>lockMode</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
          <color=#f8f8f2>.</color><color=#a6e22e>getNext</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>lockMode</color><color=#f8f8f2>))</color>
          <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getNext(), join cursor is allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getNextNoDup</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>LockMode</color> <color=#f8f8f2>lockMode</color> <color=#f92672>=</color> <color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>lockMode</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>joinCursor</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>joinCursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNext</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>lockMode</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNext</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNextNoDup</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getNextDup(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getNextDup</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
          <color=#f8f8f2>.</color><color=#a6e22e>getNextDup</color><color=#f8f8f2>(</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)))</color>
          <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getLast(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getLast</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
        <color=#f8f8f2>.</color><color=#a6e22e>getLast</color><color=#f8f8f2>(</color>
            <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)))</color>
        <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getPrev(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getPrev</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
        <color=#f8f8f2>.</color><color=#a6e22e>getPrev</color><color=#f8f8f2>(</color>
            <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)))</color>
        <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getPrevNoDup(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getPrevNoDup</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>LockMode</color> <color=#f8f8f2>lockMode</color> <color=#f92672>=</color> <color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>lockMode</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getPrevNoDup</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getPrevDup(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getPrevDup</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
          <color=#f8f8f2>.</color><color=#a6e22e>getPrevDup</color><color=#f8f8f2>(</color>
              <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)))</color>
          <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Binding version of Cursor.getSearchKey(), no join cursor allowed. Searches by record number in</color>
<color=#75715e>   * a BTREE-RECNO db with RECNO access.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getSearchKey</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsRange</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsKey</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color>
            <color=#f8f8f2>.</color><color=#a6e22e>getSearchBoth</color><color=#f8f8f2>(</color>
                <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color>
                <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color>
                <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color>
                <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)))</color>
            <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>range</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>doGetSearchKey</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>NOTFOUND</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Pass-thru version of Cursor.getSearchKey(). Searches by record number in a BTREE-RECNO db with</color>
<color=#75715e>   * RECNO access.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>doGetSearchKey</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>));</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>btreeRecNumAccess</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchRecordNumber</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchKey</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.getSearchKeyRange(), no join cursor allowed. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>getSearchKeyRange</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>));</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsRange</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsKey</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchBothRange</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>range</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchKeyRange</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>NOTFOUND</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Find the given key and value using getSearchBoth if possible or a sequential scan otherwise, no</color>
<color=#75715e>   * join cursor allowed.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>findBoth</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>OpReadOptions</color> <color=#f8f8f2>options</color> <color=#f92672>=</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>));</color>
    <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useValue</color><color=#f8f8f2>(</color><color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsRange</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsKey</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>otherThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color>
        <color=#f8f8f2>OperationStatus</color> <color=#f8f8f2>status</color> <color=#f92672>=</color>
            <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchBoth</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>status</color> <color=#f92672>==</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>SUCCESS</color> <color=#f92672>&&</color> <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>status</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>range</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>otherThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color>
        <color=#f8f8f2>OperationStatus</color> <color=#f8f8f2>status</color> <color=#f92672>=</color>
            <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchKey</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
        <color=#66d9ef>while</color> <color=#f8f8f2>(</color><color=#f8f8f2>status</color> <color=#f92672>==</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>SUCCESS</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#f8f8f2>status</color><color=#f8f8f2>;</color>
          <color=#f8f8f2>}</color>
          <color=#f8f8f2>status</color> <color=#f92672>=</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getNextDup</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color>
        <color=#75715e>/* if status != SUCCESS set range cursor to invalid? */</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getSearchBoth</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>options</color><color=#f8f8f2>).</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>NOTFOUND</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Find the given value using getSearchBoth if possible or a sequential scan otherwise, no join</color>
<color=#75715e>   * cursor allowed.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>findValue</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>findFirst</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>entityBinding</color> <color=#f92672>!=</color> <color=#66d9ef>null</color> <color=#f92672>&&</color> <color=#f92672>!</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>()</color> <color=#f92672>&&</color> <color=#f8f8f2>(</color><color=#f8f8f2>findFirst</color> <color=#f92672>||</color> <color=#f92672>!</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsAllowed</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>findBoth</color><color=#f8f8f2>(</color><color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>false</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>otherThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
      <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useValue</color><color=#f8f8f2>(</color><color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>OperationStatus</color> <color=#f8f8f2>status</color> <color=#f92672>=</color> <color=#f8f8f2>findFirst</color> <color=#f92672>?</color> <color=#f8f8f2>getFirst</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>)</color> <color=#f8f8f2>:</color> <color=#f8f8f2>getLast</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>
      <color=#66d9ef>while</color> <color=#f8f8f2>(</color><color=#f8f8f2>status</color> <color=#f92672>==</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>SUCCESS</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>break</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color>
        <color=#f8f8f2>status</color> <color=#f92672>=</color> <color=#f8f8f2>findFirst</color> <color=#f92672>?</color> <color=#f8f8f2>getNext</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>)</color> <color=#f8f8f2>:</color> <color=#f8f8f2>getPrev</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>status</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Calls Cursor.count(), no join cursor allowed. */</color>
  <color=#66d9ef>int</color> <color=#a6e22e>count</color><color=#f8f8f2>()</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsView</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#ae81ff>1</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>count</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.putCurrent(). */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>putCurrent</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkWriteAllowed</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useValue</color><color=#f8f8f2>(</color><color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>

    <color=#75715e>/*</color>
<color=#75715e>     * Workaround for a DB core problem: With HASH type a put() with</color>
<color=#75715e>     * different data is allowed.</color>
<color=#75715e>     */</color>
    <color=#66d9ef>boolean</color> <color=#f8f8f2>hashWorkaround</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsOrdered</color> <color=#f92672>&&</color> <color=#f92672>!</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>ordered</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>hashWorkaround</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>otherThang</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>otherThang</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseEntry</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
      <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>getCurrent</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>EMPTY</color><color=#f8f8f2>);</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>equalBytes</color><color=#f8f8f2>(</color><color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>otherThang</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>SUCCESS</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>(</color>
            <color=#e6db74>"Current data differs from put data with sorted duplicates"</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>putCurrent</color><color=#f8f8f2>(</color><color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.putAfter(). */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>putAfter</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkWriteAllowed</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useValue</color><color=#f8f8f2>(</color><color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color> <color=#75715e>/* why no key check? */</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>putAfter</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Binding version of Cursor.putBefore(). */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>putBefore</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>)</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkWriteAllowed</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useValue</color><color=#f8f8f2>(</color><color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>putBefore</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Binding version of Cursor.put(), optionally returning the old value and optionally using the</color>
<color=#75715e>   * current key instead of the key parameter.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>put</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color><color=#f92672>[]</color> <color=#f8f8f2>oldValue</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>initForPut</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>oldValue</color><color=#f8f8f2>,</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>);</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>put</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Binding version of Cursor.putNoOverwrite(), optionally using the current key instead of the key</color>
<color=#75715e>   * parameter.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>putNoOverwrite</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>initForPut</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>);</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>putNoOverwrite</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Binding version of Cursor.putNoDupData(), optionally returning the old value and optionally</color>
<color=#75715e>   * using the current key instead of the key parameter.</color>
<color=#75715e>   */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>putNoDupData</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color><color=#f92672>[]</color> <color=#f8f8f2>oldValue</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>initForPut</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>oldValue</color><color=#f8f8f2>,</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsOrdered</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>putNoDupData</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsAllowed</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* Unordered duplicates. */</color>
        <color=#f8f8f2>OperationStatus</color> <color=#f8f8f2>status</color> <color=#f92672>=</color>
            <color=#f8f8f2>cursor</color>
                <color=#f8f8f2>.</color><color=#a6e22e>getSearchBoth</color><color=#f8f8f2>(</color>
                    <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>primaryKeyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>OpReadOptions</color><color=#f8f8f2>.</color><color=#a6e22e>make</color><color=#f8f8f2>(</color><color=#f8f8f2>getLockMode</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>)))</color>
                <color=#f8f8f2>.</color><color=#a6e22e>status</color><color=#f8f8f2>();</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>status</color> <color=#f92672>==</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>SUCCESS</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>KEYEXIST</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>put</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* No duplicates. */</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>putNoOverwrite</color><color=#f8f8f2>(</color><color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Do setup for a put() operation. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>void</color> <color=#a6e22e>initForPut</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color> <color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color><color=#f92672>[]</color> <color=#f8f8f2>oldValue</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>useCurrentKey</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkWriteAllowed</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>useCurrentKey</color> <color=#f92672>&&</color> <color=#f92672>!</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useKey</color><color=#f8f8f2>(</color><color=#f8f8f2>key</color><color=#f8f8f2>,</color> <color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>range</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>(</color><color=#e6db74>"key out of range"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>oldValue</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>oldValue</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color> <color=#f92672>=</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>dupsAllowed</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>OperationStatus</color> <color=#f8f8f2>status</color> <color=#f92672>=</color> <color=#f8f8f2>doGetSearchKey</color><color=#f8f8f2>(</color><color=#66d9ef>true</color><color=#f8f8f2>);</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>status</color> <color=#f92672>==</color> <color=#f8f8f2>OperationStatus</color><color=#f8f8f2>.</color><color=#a6e22e>SUCCESS</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>oldValue</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color> <color=#f92672>=</color> <color=#f8f8f2>getCurrentValue</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
    <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>useValue</color><color=#f8f8f2>(</color><color=#f8f8f2>value</color><color=#f8f8f2>,</color> <color=#f8f8f2>valueThang</color><color=#f8f8f2>,</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Sets the key entry to the begin key of a single key range, so the next time a putXxx() method</color>
<color=#75715e>   * is called that key will be used.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>void</color> <color=#a6e22e>useRangeKey</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>range</color><color=#f8f8f2>.</color><color=#a6e22e>isSingleKey</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#f8f8f2>DbCompat</color><color=#f8f8f2>.</color><color=#a6e22e>unexpectedState</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
    <color=#f8f8f2>KeyRange</color><color=#f8f8f2>.</color><color=#a6e22e>copy</color><color=#f8f8f2>(</color><color=#f8f8f2>range</color><color=#f8f8f2>.</color><color=#a6e22e>getSingleKey</color><color=#f8f8f2>(),</color> <color=#f8f8f2>keyThang</color><color=#f8f8f2>);</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Perform an arbitrary database 'delete' operation. */</color>
  <color=#f8f8f2>OperationStatus</color> <color=#a6e22e>delete</color><color=#f8f8f2>()</color> <color=#66d9ef>throws</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkWriteAllowed</color><color=#f8f8f2>(</color><color=#66d9ef>true</color><color=#f8f8f2>);</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>cursor</color><color=#f8f8f2>.</color><color=#a6e22e>delete</color><color=#f8f8f2>();</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Returns the lock mode to use for a getXxx() operation. */</color>
  <color=#f8f8f2>LockMode</color> <color=#a6e22e>getLockMode</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

    <color=#75715e>/* Read-uncommmitted takes precedence over write-locking. */</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>readUncommitted</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>LockMode</color><color=#f8f8f2>.</color><color=#a6e22e>READ_UNCOMMITTED</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>lockForWrite</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>currentTxn</color><color=#f8f8f2>.</color><color=#a6e22e>getWriteLockMode</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>LockMode</color><color=#f8f8f2>.</color><color=#a6e22e>DEFAULT</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Throws an exception if a join cursor is in use. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>void</color> <color=#a6e22e>checkNoJoinCursor</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>joinCursor</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>UnsupportedOperationException</color><color=#f8f8f2>(</color><color=#e6db74>"Not allowed with a join cursor"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Throws an exception if write is not allowed or if a join cursor is in use. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>void</color> <color=#a6e22e>checkWriteAllowed</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>allowSecondary</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

    <color=#f8f8f2>checkNoJoinCursor</color><color=#f8f8f2>();</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>writeAllowed</color> <color=#f92672>||</color> <color=#f8f8f2>(</color><color=#f92672>!</color><color=#f8f8f2>allowSecondary</color> <color=#f92672>&&</color> <color=#f8f8f2>view</color><color=#f8f8f2>.</color><color=#a6e22e>isSecondary</color><color=#f8f8f2>()))</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>UnsupportedOperationException</color><color=#f8f8f2>(</color><color=#e6db74>"Writing is not allowed"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>
<color=#f8f8f2>}</color>