<color=#75715e>/*-</color>
<color=#75715e> * Copyright (C) 2002, 2017, Oracle and/or its affiliates. All rights reserved.</color>
<color=#75715e> *</color>
<color=#75715e> * This file was distributed by Oracle as part of a version of Oracle Berkeley</color>
<color=#75715e> * DB Java Edition made available at:</color>
<color=#75715e> *</color>
<color=#75715e> * http://www.oracle.com/technetwork/database/database-technologies/berkeleydb/downloads/index.html</color>
<color=#75715e> *</color>
<color=#75715e> * Please see the LICENSE file included in the top-level directory of the</color>
<color=#75715e> * appropriate version of Oracle Berkeley DB Java Edition for a copy of the</color>
<color=#75715e> * license and additional information.</color>
<color=#75715e> */</color>

<color=#f92672>package</color> <color=#f8f8f2>com.sleepycat.je.jmx</color><color=#f8f8f2>;</color>

<color=#f92672>import</color> <color=#f8f8f2>com.sleepycat.je.*</color><color=#f8f8f2>;</color>

<color=#f92672>import</color> <color=#f8f8f2>javax.management.*</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>java.io.File</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>java.util.ArrayList</color><color=#f8f8f2>;</color>
<color=#f92672>import</color> <color=#f8f8f2>java.util.List</color><color=#f8f8f2>;</color>

<color=#75715e>/**</color>
<color=#75715e> * @deprecated As of JE 4, JEMBeanHelper is deprecated in favor of the concrete MBeans available by</color>
<color=#75715e> *     default with a JE environment. These MBeans can be registered and enabled by the environment</color>
<color=#75715e> *     by setting the following JVM property: JEMonitor: This MBean provides general stats</color>
<color=#75715e> *     monitoring and access to basic environment level operations.</color>
<color=#75715e> *     <p>JEMBeanHelper is a utility class for the MBean implementation which wants to add</color>
<color=#75715e> *     management of a JE environment to its capabilities. MBean implementations can contain a</color>
<color=#75715e> *     JEMBeanHelper instance to get MBean metadata for JE and to set attributes, get attributes,</color>
<color=#75715e> *     and invoke operations.</color>
<color=#75715e> *     <p>com.sleepycat.je.jmx.JEMonitor and the example program jmx.JEApplicationMBean are two</color>
<color=#75715e> *     MBean implementations which provide support different application use cases. See those</color>
<color=#75715e> *     classes for examples of how to use JEMBeanHelper.</color>
<color=#75715e> */</color>
<color=#66d9ef>public</color> <color=#66d9ef>class</color> <color=#a6e22e>JEMBeanHelper</color> <color=#f8f8f2>{</color>

  <color=#75715e>/*</color>
<color=#75715e>   * A note to JE developers: all available JE attributes and operations are</color>
<color=#75715e>   * described in the following static info arrays. New management</color>
<color=#75715e>   * functionality can be added to the helper by adding to the appropriate</color>
<color=#75715e>   * set of static definitions. For example, if we want to add a new JE</color>
<color=#75715e>   * attribute called "foo", which is available for open environments, we</color>
<color=#75715e>   * need to define a new MBeanAttributeInfo in the OPEN_ATTR array. The</color>
<color=#75715e>   * helper then needs to provide an implementation in set/getAttribute.</color>
<color=#75715e>   */</color>

  <color=#75715e>/* Attribute names. */</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_ENV_HOME</color> <color=#f92672>=</color> <color=#e6db74>"environmentHome"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_OPEN</color> <color=#f92672>=</color> <color=#e6db74>"isOpen"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_IS_READ_ONLY</color> <color=#f92672>=</color> <color=#e6db74>"isReadOnly"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_IS_TRANSACTIONAL</color> <color=#f92672>=</color> <color=#e6db74>"isTransactional"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_CACHE_SIZE</color> <color=#f92672>=</color> <color=#e6db74>"cacheSize"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_CACHE_PERCENT</color> <color=#f92672>=</color> <color=#e6db74>"cachePercent"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_LOCK_TIMEOUT</color> <color=#f92672>=</color> <color=#e6db74>"lockTimeout"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_IS_SERIALIZABLE</color> <color=#f92672>=</color> <color=#e6db74>"isSerializableIsolation"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_TXN_TIMEOUT</color> <color=#f92672>=</color> <color=#e6db74>"transactionTimeout"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_SET_READ_ONLY</color> <color=#f92672>=</color> <color=#e6db74>"openReadOnly"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_SET_TRANSACTIONAL</color> <color=#f92672>=</color> <color=#e6db74>"openTransactional"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>public</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>ATT_SET_SERIALIZABLE</color> <color=#f92672>=</color> <color=#e6db74>"openSerializableIsolation"</color><color=#f8f8f2>;</color>

  <color=#75715e>/* COMMON_ATTR attributes are available for any environment. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>[]</color> <color=#f8f8f2>COMMON_ATTR</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_ENV_HOME</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.String"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"Environment home directory."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_OPEN</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment is open."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>)</color> <color=#75715e>// isIs</color>
  <color=#f8f8f2>};</color>

  <color=#75715e>/* OPEN_ATTR attributes are available for all open environments. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>[]</color> <color=#f8f8f2>OPEN_ATTR</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_IS_READ_ONLY</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment is read only."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_IS_TRANSACTIONAL</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment supports transactions."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_CACHE_SIZE</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Long"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"Cache size, in bytes."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_CACHE_PERCENT</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Integer"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"By default, cache size is (cachePercent * "</color>
            <color=#f92672>+</color> <color=#e6db74>"JVM maximum memory. To change the cache size "</color>
            <color=#f92672>+</color> <color=#e6db74>"using a percentage of the heap size, set "</color>
            <color=#f92672>+</color> <color=#e6db74>"the cache size to 0 and cachePercent to the "</color>
            <color=#f92672>+</color> <color=#e6db74>"desired percentage value."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_LOCK_TIMEOUT</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Long"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"Lock timeout, in microseconds."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
  <color=#f8f8f2>};</color>

  <color=#75715e>/*</color>
<color=#75715e>   * TRANSACTIONAL_ATTR attributes are available only for open, transactional</color>
<color=#75715e>   * environments.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>[]</color> <color=#f8f8f2>TRANSACTIONAL_ATTR</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_IS_SERIALIZABLE</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment provides "</color>
            <color=#f92672>+</color> <color=#e6db74>"Serializable (degree 3) isolation. The "</color>
            <color=#f92672>+</color> <color=#e6db74>"default is RepeatableRead isolation."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_TXN_TIMEOUT</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Long"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"Transaction timeout, in seconds. A value "</color> <color=#f92672>+</color> <color=#e6db74>"of 0 means there is no timeout."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>)</color> <color=#75715e>// isIs</color>
  <color=#f8f8f2>};</color>

  <color=#75715e>/*</color>
<color=#75715e>   * CREATE_ATTR attributes are available when the mbean is configured to</color>
<color=#75715e>   * support configuration and opening by the mbean. They express the</color>
<color=#75715e>   * configuration settings.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>[]</color> <color=#f8f8f2>CREATE_ATTR</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_SET_READ_ONLY</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment should be opened "</color> <color=#f92672>+</color> <color=#e6db74>"in readonly mode."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_SET_TRANSACTIONAL</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment should be opened "</color> <color=#f92672>+</color> <color=#e6db74>"in transactional mode."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanAttributeInfo</color><color=#f8f8f2>(</color>
        <color=#f8f8f2>ATT_SET_SERIALIZABLE</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"True if this environment should be opened "</color>
            <color=#f92672>+</color> <color=#e6db74>"with serializableIsolation. The default is "</color>
            <color=#f92672>+</color> <color=#e6db74>"false."</color><color=#f8f8f2>,</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// readable</color>
        <color=#66d9ef>true</color><color=#f8f8f2>,</color> <color=#75715e>// writable</color>
        <color=#66d9ef>false</color><color=#f8f8f2>),</color> <color=#75715e>// isIs</color>
  <color=#f8f8f2>};</color>

  <color=#75715e>/* Operation names */</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_CLEAN</color> <color=#f92672>=</color> <color=#e6db74>"cleanLog"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_EVICT</color> <color=#f92672>=</color> <color=#e6db74>"evictMemory"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_CHECKPOINT</color> <color=#f92672>=</color> <color=#e6db74>"checkpoint"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_SYNC</color> <color=#f92672>=</color> <color=#e6db74>"sync"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_ENV_STAT</color> <color=#f92672>=</color> <color=#e6db74>"getEnvironmentStats"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_TXN_STAT</color> <color=#f92672>=</color> <color=#e6db74>"getTxnStats"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_DB_NAMES</color> <color=#f92672>=</color> <color=#e6db74>"getDatabaseNames"</color><color=#f8f8f2>;</color>
  <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>String</color> <color=#f8f8f2>OP_DB_STAT</color> <color=#f92672>=</color> <color=#e6db74>"getDatabaseStats"</color><color=#f8f8f2>;</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_CLEAN_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_CLEAN</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Remove obsolete environment log files. "</color>
              <color=#f92672>+</color> <color=#e6db74>"Zero or more log files will be cleaned as "</color>
              <color=#f92672>+</color> <color=#e6db74>"necessary to bring the disk space "</color>
              <color=#f92672>+</color> <color=#e6db74>"utilization of the environment above the "</color>
              <color=#f92672>+</color> <color=#e6db74>"configured minimum utilization threshold "</color>
              <color=#f92672>+</color> <color=#e6db74>"as determined by the setting "</color>
              <color=#f92672>+</color> <color=#e6db74>"je.cleaner.minUtilization. Returns the "</color>
              <color=#f92672>+</color> <color=#e6db74>"number of files cleaned, that will be "</color>
              <color=#f92672>+</color> <color=#e6db74>"deleted at the next qualifying checkpoint."</color><color=#f8f8f2>,</color>
          <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color><color=#f8f8f2>,</color> <color=#75715e>// no params</color>
          <color=#e6db74>"java.lang.Integer"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>UNKNOWN</color><color=#f8f8f2>);</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_EVICT_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_EVICT</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Reduce cache usage to the threshold "</color>
              <color=#f92672>+</color> <color=#e6db74>"determined by the setting "</color>
              <color=#f92672>+</color> <color=#e6db74>"je.evictor.useMemoryFloor. "</color><color=#f8f8f2>,</color>
          <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color><color=#f8f8f2>,</color> <color=#75715e>// no params</color>
          <color=#e6db74>"void"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>UNKNOWN</color><color=#f8f8f2>);</color>

  <color=#75715e>/* parameter for checkpoint operation. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[]</color> <color=#f8f8f2>checkpointParams</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f8f8f2>(</color>
        <color=#e6db74>"force"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"If true, force a checkpoint even if "</color>
            <color=#f92672>+</color> <color=#e6db74>"there has been no activity since the last "</color>
            <color=#f92672>+</color> <color=#e6db74>"checkpoint. Returns true if a checkpoint "</color>
            <color=#f92672>+</color> <color=#e6db74>"executed."</color><color=#f8f8f2>)</color>
  <color=#f8f8f2>};</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_CHECKPOINT_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_CHECKPOINT</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Checkpoint the environment."</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>checkpointParams</color><color=#f8f8f2>,</color>
          <color=#e6db74>"void"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>UNKNOWN</color><color=#f8f8f2>);</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_SYNC_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_SYNC</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Flush the environment to stable storage."</color><color=#f8f8f2>,</color>
          <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color><color=#f8f8f2>,</color> <color=#75715e>// no params</color>
          <color=#e6db74>"void"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>UNKNOWN</color><color=#f8f8f2>);</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[]</color> <color=#f8f8f2>statParams</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f8f8f2>(</color>
        <color=#e6db74>"clear"</color><color=#f8f8f2>,</color> <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color> <color=#e6db74>"If true, reset statistics after reading."</color><color=#f8f8f2>),</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f8f8f2>(</color>
        <color=#e6db74>"fast"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"If true, only return statistics which do "</color> <color=#f92672>+</color> <color=#e6db74>"not require expensive computation."</color><color=#f8f8f2>)</color>
  <color=#f8f8f2>};</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_ENV_STAT_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_ENV_STAT</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Get environment statistics."</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>statParams</color><color=#f8f8f2>,</color>
          <color=#e6db74>"java.lang.String"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>INFO</color><color=#f8f8f2>);</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_TXN_STAT_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_TXN_STAT</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Get transactional statistics."</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>statParams</color><color=#f8f8f2>,</color>
          <color=#e6db74>"java.lang.String"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>INFO</color><color=#f8f8f2>);</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_DB_NAMES_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_DB_NAMES</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Get the names of databases in the environment."</color><color=#f8f8f2>,</color>
          <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color><color=#f8f8f2>,</color> <color=#75715e>// no params</color>
          <color=#e6db74>"java.util.ArrayList"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>INFO</color><color=#f8f8f2>);</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f92672>[]</color> <color=#f8f8f2>dbStatParams</color> <color=#f92672>=</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f8f8f2>(</color>
        <color=#e6db74>"clear"</color><color=#f8f8f2>,</color> <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color> <color=#e6db74>"If true, reset statistics after reading."</color><color=#f8f8f2>),</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f8f8f2>(</color>
        <color=#e6db74>"fast"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"java.lang.Boolean"</color><color=#f8f8f2>,</color>
        <color=#e6db74>"If true, only return statistics which do "</color>
            <color=#f92672>+</color> <color=#e6db74>"not require expensive computation. "</color>
            <color=#f92672>+</color> <color=#e6db74>"Currently all database stats are not fast."</color><color=#f8f8f2>),</color>
    <color=#66d9ef>new</color> <color=#f8f8f2>MBeanParameterInfo</color><color=#f8f8f2>(</color><color=#e6db74>"databaseName"</color><color=#f8f8f2>,</color> <color=#e6db74>"java.lang.String"</color><color=#f8f8f2>,</color> <color=#e6db74>"database name"</color><color=#f8f8f2>)</color>
  <color=#f8f8f2>};</color>

  <color=#66d9ef>private</color> <color=#66d9ef>static</color> <color=#66d9ef>final</color> <color=#f8f8f2>MBeanOperationInfo</color> <color=#f8f8f2>OP_DB_STAT_INFO</color> <color=#f92672>=</color>
      <color=#66d9ef>new</color> <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>(</color>
          <color=#f8f8f2>OP_DB_STAT</color><color=#f8f8f2>,</color>
          <color=#e6db74>"Get database statistics."</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>dbStatParams</color><color=#f8f8f2>,</color>
          <color=#e6db74>"java.lang.String"</color><color=#f8f8f2>,</color>
          <color=#f8f8f2>MBeanOperationInfo</color><color=#f8f8f2>.</color><color=#a6e22e>INFO</color><color=#f8f8f2>);</color>

  <color=#75715e>/* target JE environment home directory. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>final</color> <color=#f8f8f2>File</color> <color=#f8f8f2>environmentHome</color><color=#f8f8f2>;</color>

  <color=#75715e>/*</color>
<color=#75715e>   * If canConfigure is true, this helper will make environment configuration</color>
<color=#75715e>   * attributes available in the mbean metadata. Configuration attributes</color>
<color=#75715e>   * will be saved in the openConfig instance.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>final</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>canConfigure</color><color=#f8f8f2>;</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>EnvironmentConfig</color> <color=#f8f8f2>openConfig</color><color=#f8f8f2>;</color>

  <color=#75715e>/* true if the mbean metadata needs to be refreshed. */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>needReset</color><color=#f8f8f2>;</color>

  <color=#75715e>/*</color>
<color=#75715e>   * Save whether the environment was open the last time we fetched mbean</color>
<color=#75715e>   * attributes. Use to detect a change in environment status.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>private</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>envWasOpen</color><color=#f8f8f2>;</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Instantiate a helper, specifying environment home and open capabilities.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param environmentHome home directory of the target JE environment.</color>
<color=#75715e>   * @param canConfigure If true, the helper will show environment configuration attributes.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#a6e22e>JEMBeanHelper</color><color=#f8f8f2>(</color><color=#f8f8f2>File</color> <color=#f8f8f2>environmentHome</color><color=#f8f8f2>,</color> <color=#66d9ef>boolean</color> <color=#f8f8f2>canConfigure</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>environmentHome</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>(</color><color=#e6db74>"Environment home cannot be null"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>environmentHome</color> <color=#f92672>=</color> <color=#f8f8f2>environmentHome</color><color=#f8f8f2>;</color>
    <color=#66d9ef>this</color><color=#f8f8f2>.</color><color=#a6e22e>canConfigure</color> <color=#f92672>=</color> <color=#f8f8f2>canConfigure</color><color=#f8f8f2>;</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>canConfigure</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>openConfig</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>EnvironmentConfig</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Return the target environment directory.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @return the environment directory.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>File</color> <color=#a6e22e>getEnvironmentHome</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>environmentHome</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * If the helper was instantiated with canConfigure==true, it shows environment configuration</color>
<color=#75715e>   * attributes. Those attributes are returned within this EnvironmentConfig object for use in</color>
<color=#75715e>   * opening environments.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @return EnvironmentConfig object which saves configuration attributes recorded through MBean</color>
<color=#75715e>   *     attributes.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>EnvironmentConfig</color> <color=#a6e22e>getEnvironmentOpenConfig</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>openConfig</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Tell the MBean if the available set of functionality has changed.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @return true if the MBean should regenerate its JE metadata.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#66d9ef>synchronized</color> <color=#66d9ef>boolean</color> <color=#a6e22e>getNeedReset</color><color=#f8f8f2>()</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>needReset</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Get MBean attribute metadata for this environment.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param targetEnv The target JE environment. May be null if the environment is not open.</color>
<color=#75715e>   * @return list of MBeanAttributeInfo objects describing the available attributes.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>List</color><color=#f92672><</color><color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>></color> <color=#a6e22e>getAttributeList</color><color=#f8f8f2>(</color><color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

    <color=#75715e>/* Turn off reset because the mbean metadata is being refreshed. */</color>
    <color=#f8f8f2>setNeedReset</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>

    <color=#f8f8f2>ArrayList</color><color=#f92672><</color><color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>></color> <color=#f8f8f2>attrList</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>ArrayList</color><color=#f92672><</color><color=#f8f8f2>MBeanAttributeInfo</color><color=#f92672>></color><color=#f8f8f2>();</color>

    <color=#75715e>/* Add attributes for all JE environments. */</color>
    <color=#66d9ef>for</color> <color=#f8f8f2>(</color><color=#66d9ef>int</color> <color=#f8f8f2>i</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672><</color> <color=#f8f8f2>COMMON_ATTR</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color><color=#f92672>++</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>attrList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>COMMON_ATTR</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>canConfigure</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* Add attributes for configuring an environment. */</color>
        <color=#66d9ef>for</color> <color=#f8f8f2>(</color><color=#66d9ef>int</color> <color=#f8f8f2>i</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672><</color> <color=#f8f8f2>CREATE_ATTR</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color><color=#f92672>++</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>attrList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>CREATE_ATTR</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color><color=#f8f8f2>);</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
      <color=#75715e>/* Add attributes for an open environment. */</color>
      <color=#66d9ef>for</color> <color=#f8f8f2>(</color><color=#66d9ef>int</color> <color=#f8f8f2>i</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672><</color> <color=#f8f8f2>OPEN_ATTR</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color><color=#f92672>++</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>attrList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OPEN_ATTR</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>

      <color=#75715e>/* Add attributes for an open, transactional environment. */</color>
      <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>EnvironmentConfig</color> <color=#f8f8f2>config</color> <color=#f92672>=</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getConfig</color><color=#f8f8f2>();</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getTransactional</color><color=#f8f8f2>())</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>for</color> <color=#f8f8f2>(</color><color=#66d9ef>int</color> <color=#f8f8f2>i</color> <color=#f92672>=</color> <color=#ae81ff>0</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color> <color=#f92672><</color> <color=#f8f8f2>TRANSACTIONAL_ATTR</color><color=#f8f8f2>.</color><color=#a6e22e>length</color><color=#f8f8f2>;</color> <color=#f8f8f2>i</color><color=#f92672>++</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
            <color=#f8f8f2>attrList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>TRANSACTIONAL_ATTR</color><color=#f92672>[</color><color=#f8f8f2>i</color><color=#f92672>]</color><color=#f8f8f2>);</color>
          <color=#f8f8f2>}</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>ignore</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* ignore */</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>attrList</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Get an attribute value for the given environment. Check JEMBeanHelper.getNeedReset() after this</color>
<color=#75715e>   * call because the helper may detect that the environment has changed and that the MBean metadata</color>
<color=#75715e>   * should be reset.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param targetEnv The target JE environment. May be null if the environment is not open.</color>
<color=#75715e>   * @param attributeName attribute name.</color>
<color=#75715e>   * @return attribute value.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>Object</color> <color=#a6e22e>getAttribute</color><color=#f8f8f2>(</color><color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>,</color> <color=#f8f8f2>String</color> <color=#f8f8f2>attributeName</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>,</color> <color=#f8f8f2>MBeanException</color> <color=#f8f8f2>{</color>

    <color=#75715e>/* Sanity check. */</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>(</color><color=#e6db74>"Attribute name cannot be null"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#75715e>/* These attributes are available regardless of environment state. */</color>
    <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_ENV_HOME</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#f8f8f2>environmentHome</color><color=#f8f8f2>.</color><color=#a6e22e>getCanonicalPath</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_OPEN</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>boolean</color> <color=#f8f8f2>envIsOpen</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>);</color>
        <color=#f8f8f2>resetIfOpenStateChanged</color><color=#f8f8f2>(</color><color=#f8f8f2>envIsOpen</color><color=#f8f8f2>);</color>
        <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>envIsOpen</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_SET_READ_ONLY</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>openConfig</color><color=#f8f8f2>.</color><color=#a6e22e>getReadOnly</color><color=#f8f8f2>());</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_SET_TRANSACTIONAL</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>openConfig</color><color=#f8f8f2>.</color><color=#a6e22e>getTransactional</color><color=#f8f8f2>());</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_SET_SERIALIZABLE</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>openConfig</color><color=#f8f8f2>.</color><color=#a6e22e>getTxnSerializableIsolation</color><color=#f8f8f2>());</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* The rest are JE environment attributes. */</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

          <color=#f8f8f2>EnvironmentConfig</color> <color=#f8f8f2>config</color> <color=#f92672>=</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getConfig</color><color=#f8f8f2>();</color>

          <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_IS_READ_ONLY</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getReadOnly</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_IS_TRANSACTIONAL</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getTransactional</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_CACHE_SIZE</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Long</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getCacheSize</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_CACHE_PERCENT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Integer</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getCachePercent</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_LOCK_TIMEOUT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Long</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getLockTimeout</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_IS_SERIALIZABLE</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Boolean</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getTxnSerializableIsolation</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attributeName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_TXN_TIMEOUT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Long</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getTxnTimeout</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>(</color><color=#e6db74>"attribute "</color> <color=#f92672>+</color> <color=#f8f8f2>attributeName</color> <color=#f92672>+</color> <color=#e6db74>" is not valid."</color><color=#f8f8f2>);</color>
          <color=#f8f8f2>}</color>
        <color=#f8f8f2>}</color>
        <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>Exception</color> <color=#f8f8f2>e</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

      <color=#75715e>/*</color>
<color=#75715e>       * Add both the message and the exception for easiest deciphering</color>
<color=#75715e>       * of the problem. Sometimes the original exception stacktrace gets</color>
<color=#75715e>       * hidden in server logs.</color>
<color=#75715e>       */</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>MBeanException</color><color=#f8f8f2>(</color><color=#f8f8f2>e</color><color=#f8f8f2>,</color> <color=#f8f8f2>e</color><color=#f8f8f2>.</color><color=#a6e22e>getMessage</color><color=#f8f8f2>());</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Set an attribute value for the given environment.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param targetEnv The target JE environment. May be null if the environment is not open.</color>
<color=#75715e>   * @param attribute name/value pair</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#66d9ef>void</color> <color=#a6e22e>setAttribute</color><color=#f8f8f2>(</color><color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>,</color> <color=#f8f8f2>Attribute</color> <color=#f8f8f2>attribute</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>,</color> <color=#f8f8f2>InvalidAttributeValueException</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>attribute</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>(</color><color=#e6db74>"Attribute cannot be null"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#75715e>/* Sanity check parameters. */</color>
    <color=#f8f8f2>String</color> <color=#f8f8f2>name</color> <color=#f92672>=</color> <color=#f8f8f2>attribute</color><color=#f8f8f2>.</color><color=#a6e22e>getName</color><color=#f8f8f2>();</color>
    <color=#f8f8f2>Object</color> <color=#f8f8f2>value</color> <color=#f92672>=</color> <color=#f8f8f2>attribute</color><color=#f8f8f2>.</color><color=#a6e22e>getValue</color><color=#f8f8f2>();</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>name</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>(</color><color=#e6db74>"Attribute name cannot be null"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>value</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>InvalidAttributeValueException</color><color=#f8f8f2>(</color>
          <color=#e6db74>"Attribute value for attribute "</color> <color=#f92672>+</color> <color=#f8f8f2>name</color> <color=#f92672>+</color> <color=#e6db74>" cannot be null"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>name</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_SET_READ_ONLY</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>openConfig</color><color=#f8f8f2>.</color><color=#a6e22e>setReadOnly</color><color=#f8f8f2>(((</color><color=#f8f8f2>Boolean</color><color=#f8f8f2>)</color> <color=#f8f8f2>value</color><color=#f8f8f2>).</color><color=#a6e22e>booleanValue</color><color=#f8f8f2>());</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>name</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_SET_TRANSACTIONAL</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>openConfig</color><color=#f8f8f2>.</color><color=#a6e22e>setTransactional</color><color=#f8f8f2>(((</color><color=#f8f8f2>Boolean</color><color=#f8f8f2>)</color> <color=#f8f8f2>value</color><color=#f8f8f2>).</color><color=#a6e22e>booleanValue</color><color=#f8f8f2>());</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>name</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_SET_SERIALIZABLE</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>openConfig</color><color=#f8f8f2>.</color><color=#a6e22e>setTxnSerializableIsolation</color><color=#f8f8f2>(((</color><color=#f8f8f2>Boolean</color><color=#f8f8f2>)</color> <color=#f8f8f2>value</color><color=#f8f8f2>).</color><color=#a6e22e>booleanValue</color><color=#f8f8f2>());</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* Set the specified attribute if the environment is open. */</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

          <color=#f8f8f2>EnvironmentMutableConfig</color> <color=#f8f8f2>config</color> <color=#f92672>=</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getMutableConfig</color><color=#f8f8f2>();</color>

          <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>name</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_CACHE_SIZE</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>setCacheSize</color><color=#f8f8f2>(((</color><color=#f8f8f2>Long</color><color=#f8f8f2>)</color> <color=#f8f8f2>value</color><color=#f8f8f2>).</color><color=#a6e22e>longValue</color><color=#f8f8f2>());</color>
            <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>setMutableConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>);</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>name</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>ATT_CACHE_PERCENT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>setCachePercent</color><color=#f8f8f2>(((</color><color=#f8f8f2>Integer</color><color=#f8f8f2>)</color> <color=#f8f8f2>value</color><color=#f8f8f2>).</color><color=#a6e22e>intValue</color><color=#f8f8f2>());</color>
            <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>setMutableConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>);</color>
          <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
            <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>(</color><color=#e6db74>"attribute "</color> <color=#f92672>+</color> <color=#f8f8f2>name</color> <color=#f92672>+</color> <color=#e6db74>" is not valid."</color><color=#f8f8f2>);</color>
          <color=#f8f8f2>}</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>AttributeNotFoundException</color><color=#f8f8f2>(</color><color=#e6db74>"attribute "</color> <color=#f92672>+</color> <color=#f8f8f2>name</color> <color=#f92672>+</color> <color=#e6db74>" is not valid."</color><color=#f8f8f2>);</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>NumberFormatException</color> <color=#f8f8f2>e</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>InvalidAttributeValueException</color><color=#f8f8f2>(</color><color=#e6db74>"attribute name="</color> <color=#f92672>+</color> <color=#f8f8f2>name</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>e</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>InvalidAttributeValueException</color><color=#f8f8f2>(</color><color=#e6db74>"attribute name="</color> <color=#f92672>+</color> <color=#f8f8f2>name</color> <color=#f92672>+</color> <color=#f8f8f2>e</color><color=#f8f8f2>.</color><color=#a6e22e>getMessage</color><color=#f8f8f2>());</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/********************************************************************/</color>
  <color=#75715e>/* JE Operations                                                    */</color>
  <color=#75715e>/********************************************************************/</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Get mbean operation metadata for this environment.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param targetEnv The target JE environment. May be null if the environment is not open.</color>
<color=#75715e>   * @return List of MBeanOperationInfo describing available operations.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>List</color><color=#f92672><</color><color=#f8f8f2>MBeanOperationInfo</color><color=#f92672>></color> <color=#a6e22e>getOperationList</color><color=#f8f8f2>(</color><color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
    <color=#f8f8f2>setNeedReset</color><color=#f8f8f2>(</color><color=#66d9ef>false</color><color=#f8f8f2>);</color>

    <color=#f8f8f2>List</color><color=#f92672><</color><color=#f8f8f2>MBeanOperationInfo</color><color=#f92672>></color> <color=#f8f8f2>operationList</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>ArrayList</color><color=#f92672><</color><color=#f8f8f2>MBeanOperationInfo</color><color=#f92672>></color><color=#f8f8f2>();</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

      <color=#75715e>/*</color>
<color=#75715e>       * These operations are only available if the environment is open.</color>
<color=#75715e>       */</color>
      <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_CLEAN_INFO</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_EVICT_INFO</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_ENV_STAT_INFO</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_DB_NAMES_INFO</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_DB_STAT_INFO</color><color=#f8f8f2>);</color>

      <color=#75715e>/* Add checkpoint only for transactional environments. */</color>
      <color=#66d9ef>boolean</color> <color=#f8f8f2>isTransactional</color> <color=#f92672>=</color> <color=#66d9ef>false</color><color=#f8f8f2>;</color>
      <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>EnvironmentConfig</color> <color=#f8f8f2>config</color> <color=#f92672>=</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getConfig</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>isTransactional</color> <color=#f92672>=</color> <color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>getTransactional</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>e</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* Don't make any operations available. */</color>
        <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>ArrayList</color><color=#f92672><</color><color=#f8f8f2>MBeanOperationInfo</color><color=#f92672>></color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>

      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>isTransactional</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_CHECKPOINT_INFO</color><color=#f8f8f2>);</color>
        <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_TXN_STAT_INFO</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>operationList</color><color=#f8f8f2>.</color><color=#a6e22e>add</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_SYNC_INFO</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>return</color> <color=#f8f8f2>operationList</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Invoke an operation for the given environment.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param targetEnv The target JE environment. May be null if the environment is not open.</color>
<color=#75715e>   * @param actionName operation name.</color>
<color=#75715e>   * @param params operation parameters. May be null.</color>
<color=#75715e>   * @param signature operation signature. May be null.</color>
<color=#75715e>   * @return the operation result</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>Object</color> <color=#a6e22e>invoke</color><color=#f8f8f2>(</color>
      <color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>,</color> <color=#f8f8f2>String</color> <color=#f8f8f2>actionName</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color><color=#f92672>[]</color> <color=#f8f8f2>params</color><color=#f8f8f2>,</color> <color=#f8f8f2>String</color><color=#f92672>[]</color> <color=#f8f8f2>signature</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>MBeanException</color> <color=#f8f8f2>{</color>

    <color=#75715e>/* Sanity checking. */</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>(</color><color=#e6db74>"actionName cannot be null"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color>

    <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_CLEAN</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>int</color> <color=#f8f8f2>numFiles</color> <color=#f92672>=</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>cleanLog</color><color=#f8f8f2>();</color>
          <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>Integer</color><color=#f8f8f2>(</color><color=#f8f8f2>numFiles</color><color=#f8f8f2>);</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_EVICT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>evictMemory</color><color=#f8f8f2>();</color>
          <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_CHECKPOINT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>CheckpointConfig</color> <color=#f8f8f2>config</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>CheckpointConfig</color><color=#f8f8f2>();</color>
          <color=#66d9ef>if</color> <color=#f8f8f2>((</color><color=#f8f8f2>params</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f92672>&&</color> <color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>.</color><color=#a6e22e>length</color> <color=#f92672>></color> <color=#ae81ff>0</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
            <color=#f8f8f2>Boolean</color> <color=#f8f8f2>force</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>Boolean</color><color=#f8f8f2>)</color> <color=#f8f8f2>params</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color><color=#f8f8f2>;</color>
            <color=#f8f8f2>config</color><color=#f8f8f2>.</color><color=#a6e22e>setForce</color><color=#f8f8f2>(</color><color=#f8f8f2>force</color><color=#f8f8f2>.</color><color=#a6e22e>booleanValue</color><color=#f8f8f2>());</color>
          <color=#f8f8f2>}</color>
          <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>checkpoint</color><color=#f8f8f2>(</color><color=#f8f8f2>config</color><color=#f8f8f2>);</color>
          <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_SYNC</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>sync</color><color=#f8f8f2>();</color>
          <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_ENV_STAT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getStats</color><color=#f8f8f2>(</color><color=#f8f8f2>getStatsConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>)).</color><color=#a6e22e>toString</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_TXN_STAT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getTransactionStats</color><color=#f8f8f2>(</color><color=#f8f8f2>getStatsConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>)).</color><color=#a6e22e>toString</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_DB_NAMES</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>getDatabaseNames</color><color=#f8f8f2>();</color>
        <color=#f8f8f2>}</color> <color=#66d9ef>else</color> <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>actionName</color><color=#f8f8f2>.</color><color=#a6e22e>equals</color><color=#f8f8f2>(</color><color=#f8f8f2>OP_DB_STAT</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
          <color=#f8f8f2>DatabaseStats</color> <color=#f8f8f2>stats</color> <color=#f92672>=</color> <color=#f8f8f2>getDatabaseStats</color><color=#f8f8f2>(</color><color=#f8f8f2>targetEnv</color><color=#f8f8f2>,</color> <color=#f8f8f2>params</color><color=#f8f8f2>);</color>
          <color=#66d9ef>return</color> <color=#f8f8f2>stats</color> <color=#f92672>!=</color> <color=#66d9ef>null</color> <color=#f92672>?</color> <color=#f8f8f2>stats</color><color=#f8f8f2>.</color><color=#a6e22e>toString</color><color=#f8f8f2>()</color> <color=#f8f8f2>:</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
        <color=#f8f8f2>}</color>
      <color=#f8f8f2>}</color>

      <color=#66d9ef>return</color> <color=#66d9ef>new</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>(</color><color=#e6db74>"actionName: "</color> <color=#f92672>+</color> <color=#f8f8f2>actionName</color> <color=#f92672>+</color> <color=#e6db74>" is not valid"</color><color=#f8f8f2>);</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>Exception</color> <color=#f8f8f2>e</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>

      <color=#75715e>/*</color>
<color=#75715e>       * Add both the message and the exception for easiest deciphering</color>
<color=#75715e>       * of the problem. Sometimes the original exception stacktrace gets</color>
<color=#75715e>       * hidden in server logs.</color>
<color=#75715e>       */</color>
      <color=#66d9ef>throw</color> <color=#66d9ef>new</color> <color=#f8f8f2>MBeanException</color><color=#f8f8f2>(</color><color=#f8f8f2>e</color><color=#f8f8f2>,</color> <color=#f8f8f2>e</color><color=#f8f8f2>.</color><color=#a6e22e>getMessage</color><color=#f8f8f2>());</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/** Helper for creating a StatsConfig object to use as an operation parameter. */</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>StatsConfig</color> <color=#a6e22e>getStatsConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>Object</color><color=#f92672>[]</color> <color=#f8f8f2>params</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
    <color=#f8f8f2>StatsConfig</color> <color=#f8f8f2>statsConfig</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>StatsConfig</color><color=#f8f8f2>();</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>((</color><color=#f8f8f2>params</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f92672>&&</color> <color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>.</color><color=#a6e22e>length</color> <color=#f92672>></color> <color=#ae81ff>0</color><color=#f8f8f2>)</color> <color=#f92672>&&</color> <color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>Boolean</color> <color=#f8f8f2>clear</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>Boolean</color><color=#f8f8f2>)</color> <color=#f8f8f2>params</color><color=#f92672>[</color><color=#ae81ff>0</color><color=#f92672>]</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>statsConfig</color><color=#f8f8f2>.</color><color=#a6e22e>setClear</color><color=#f8f8f2>(</color><color=#f8f8f2>clear</color><color=#f8f8f2>.</color><color=#a6e22e>booleanValue</color><color=#f8f8f2>());</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>((</color><color=#f8f8f2>params</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f92672>&&</color> <color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>.</color><color=#a6e22e>length</color> <color=#f92672>></color> <color=#ae81ff>1</color><color=#f8f8f2>)</color> <color=#f92672>&&</color> <color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f92672>[</color><color=#ae81ff>1</color><color=#f92672>]</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>Boolean</color> <color=#f8f8f2>fast</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>Boolean</color><color=#f8f8f2>)</color> <color=#f8f8f2>params</color><color=#f92672>[</color><color=#ae81ff>1</color><color=#f92672>]</color><color=#f8f8f2>;</color>
      <color=#f8f8f2>statsConfig</color><color=#f8f8f2>.</color><color=#a6e22e>setFast</color><color=#f8f8f2>(</color><color=#f8f8f2>fast</color><color=#f8f8f2>.</color><color=#a6e22e>booleanValue</color><color=#f8f8f2>());</color>
    <color=#f8f8f2>}</color>
    <color=#66d9ef>return</color> <color=#f8f8f2>statsConfig</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * Helper to get statistics for a given database.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @param params operation parameters</color>
<color=#75715e>   * @return DatabaseStats object</color>
<color=#75715e>   */</color>
  <color=#66d9ef>private</color> <color=#f8f8f2>DatabaseStats</color> <color=#a6e22e>getDatabaseStats</color><color=#f8f8f2>(</color><color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>,</color> <color=#f8f8f2>Object</color><color=#f92672>[]</color> <color=#f8f8f2>params</color><color=#f8f8f2>)</color>
      <color=#66d9ef>throws</color> <color=#f8f8f2>IllegalArgumentException</color><color=#f8f8f2>,</color> <color=#f8f8f2>DatabaseException</color> <color=#f8f8f2>{</color>

    <color=#66d9ef>if</color> <color=#f8f8f2>((</color><color=#f8f8f2>params</color> <color=#f92672>==</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f92672>||</color> <color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>.</color><color=#a6e22e>length</color> <color=#f92672><</color> <color=#ae81ff>3</color><color=#f8f8f2>))</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>
    <color=#f8f8f2>String</color> <color=#f8f8f2>dbName</color> <color=#f92672>=</color> <color=#f8f8f2>(</color><color=#f8f8f2>String</color><color=#f8f8f2>)</color> <color=#f8f8f2>params</color><color=#f92672>[</color><color=#ae81ff>2</color><color=#f92672>]</color><color=#f8f8f2>;</color>

    <color=#f8f8f2>Database</color> <color=#f8f8f2>db</color> <color=#f92672>=</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
    <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>DatabaseConfig</color> <color=#f8f8f2>dbConfig</color> <color=#f92672>=</color> <color=#66d9ef>new</color> <color=#f8f8f2>DatabaseConfig</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>dbConfig</color><color=#f8f8f2>.</color><color=#a6e22e>setReadOnly</color><color=#f8f8f2>(</color><color=#66d9ef>true</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>DbInternal</color><color=#f8f8f2>.</color><color=#a6e22e>setUseExistingConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>dbConfig</color><color=#f8f8f2>,</color> <color=#66d9ef>true</color><color=#f8f8f2>);</color>
      <color=#66d9ef>try</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>db</color> <color=#f92672>=</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>.</color><color=#a6e22e>openDatabase</color><color=#f8f8f2>(</color><color=#66d9ef>null</color><color=#f8f8f2>,</color> <color=#f8f8f2>dbName</color><color=#f8f8f2>,</color> <color=#f8f8f2>dbConfig</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color> <color=#66d9ef>catch</color> <color=#f8f8f2>(</color><color=#f8f8f2>DatabaseExistsException</color> <color=#f8f8f2>e</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#75715e>/* Should never happen, ExlcusiveCreate is false. */</color>
        <color=#66d9ef>throw</color> <color=#f8f8f2>EnvironmentFailureException</color><color=#f8f8f2>.</color><color=#a6e22e>unexpectedException</color><color=#f8f8f2>(</color><color=#f8f8f2>e</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>}</color>
      <color=#66d9ef>return</color> <color=#f8f8f2>db</color><color=#f8f8f2>.</color><color=#a6e22e>getStats</color><color=#f8f8f2>(</color><color=#f8f8f2>getStatsConfig</color><color=#f8f8f2>(</color><color=#f8f8f2>params</color><color=#f8f8f2>));</color>
    <color=#f8f8f2>}</color> <color=#66d9ef>finally</color> <color=#f8f8f2>{</color>
      <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>db</color> <color=#f92672>!=</color> <color=#66d9ef>null</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
        <color=#f8f8f2>db</color><color=#f8f8f2>.</color><color=#a6e22e>close</color><color=#f8f8f2>();</color>
      <color=#f8f8f2>}</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>

  <color=#75715e>/**</color>
<color=#75715e>   * No notifications are supported.</color>
<color=#75715e>   *</color>
<color=#75715e>   * @return List of MBeanNotificationInfo for available notifications.</color>
<color=#75715e>   */</color>
  <color=#66d9ef>public</color> <color=#f8f8f2>MBeanNotificationInfo</color><color=#f92672>[]</color> <color=#a6e22e>getNotificationInfo</color><color=#f8f8f2>(</color><color=#f8f8f2>Environment</color> <color=#f8f8f2>targetEnv</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>return</color> <color=#66d9ef>null</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#66d9ef>private</color> <color=#66d9ef>synchronized</color> <color=#66d9ef>void</color> <color=#a6e22e>setNeedReset</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>reset</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
    <color=#f8f8f2>needReset</color> <color=#f92672>=</color> <color=#f8f8f2>reset</color><color=#f8f8f2>;</color>
  <color=#f8f8f2>}</color>

  <color=#66d9ef>private</color> <color=#66d9ef>synchronized</color> <color=#66d9ef>void</color> <color=#a6e22e>resetIfOpenStateChanged</color><color=#f8f8f2>(</color><color=#66d9ef>boolean</color> <color=#f8f8f2>isOpen</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
    <color=#66d9ef>if</color> <color=#f8f8f2>(</color><color=#f8f8f2>isOpen</color> <color=#f92672>!=</color> <color=#f8f8f2>envWasOpen</color><color=#f8f8f2>)</color> <color=#f8f8f2>{</color>
      <color=#f8f8f2>setNeedReset</color><color=#f8f8f2>(</color><color=#66d9ef>true</color><color=#f8f8f2>);</color>
      <color=#f8f8f2>envWasOpen</color> <color=#f92672>=</color> <color=#f8f8f2>isOpen</color><color=#f8f8f2>;</color>
    <color=#f8f8f2>}</color>
  <color=#f8f8f2>}</color>
<color=#f8f8f2>}</color>